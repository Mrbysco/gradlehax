// Sets the name of files to ModName-Forge-MCVersion.
archivesBaseName = "${mod_id}-${minecraft_version}"

java {

    // Generate a sources JAR.
    withSourcesJar()

    // Generate a JavaDoc JAR.
    withJavadocJar()

    // Set minimum language version.  
    if (project.hasProperty("java_16")) {
        toolchain.languageVersion = JavaLanguageVersion.of(16)
    } else {
        if (project.hasProperty("java_17")) {
            toolchain.languageVersion = JavaLanguageVersion.of(17)
        } else {
            toolchain.languageVersion = JavaLanguageVersion.of(8)
        }
    }
}

javadoc {

    // Supress annoying warnings when generating JavaDoc files.
    options.addStringOption('Xdoclint:none', '-quiet')
}

jar {
    manifest {
        attributes([
                'FMLModType'              : 'LIBRARY',
                'Timestamp'               : System.currentTimeMillis(),
                'Specification-Title'     : project.ext.modName,
                'Specification-Vendor'    : project.ext.modAuthor,
                'Specification-Version'   : project.version,
                'Implementation-Title'    : project.ext.modName,
                'Implementation-Version'  : project.version,
                'Implementation-Vendor'   : project.ext.modAuthor,
                'Implementation-Timestamp': new Date().format("yyyy-MM-dd'T'HH:mm:ssZ"),
                'Built-On-Java'           : "${System.getProperty('java.vm.version')} (${System.getProperty('java.vm.vendor')})"
        ])
    }
    classifier = "noembed"
}

task deobfJar (type: Jar) {
    from(sourceSets.main.output)
    exclude "data/**"
    exclude "META-INF/mods.toml"
    exclude "META-INF/accesstransformer.cfg"
    exclude ".cache"
    exclude "noobanidus/libs/shoulders/Shoulders**"
    exclude "noobanidus/libs/shoulders/gen/**"
    exclude "noobanidus/libs/shoulders/setup/**"

    archiveClassifier = "deobf"
    manifest {
        attributes(
                'FMLModType': 'LIBRARY')

    }
}

task embedJar (type: Jar) {
    from(sourceSets.main.output)
    exclude "data/**"
    exclude "META-INF/mods.toml"
    exclude "META-INF/accesstransformer.cfg"
    exclude ".cache"
    exclude "noobanidus/libs/shoulders/Shoulders**"
    exclude "noobanidus/libs/shoulders/gen/**"
    exclude "noobanidus/libs/shoulders/setup/**"

    archiveClassifier = ""
    manifest {
        attributes(
                'FMLModType': 'LIBRARY')

    }
}